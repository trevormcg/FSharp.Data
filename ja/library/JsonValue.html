<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>JSON パーサーおよびリーダー
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="FSharp.Data">

    <link rel="stylesheet" id="theme_link" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.3.1/materia/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <link type="text/css" rel="stylesheet" href="https://fsprojects.github.io/FSharp.Data/content/navbar-fixed-left.css" />
    <link type="text/css" rel="stylesheet" href="https://fsprojects.github.io/FSharp.Data/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="https://fsprojects.github.io/FSharp.Data/content/fsdocs-custom.css" />
    <script type="text/javascript" src="https://fsprojects.github.io/FSharp.Data/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->
    
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary fixed-left" id="fsdocs-nav">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <a href="https://fsprojects.github.io/FSharp.Data/"><img id="fsdocs-logo" src="https://fsprojects.github.io/FSharp.Data/img/logo.png" /></a>
            <!-- BEGIN SEARCH BOX: this adds support for the search box -->
            <div id="header">
                <div class="searchbox" id="fsdocs-searchbox">
                    <label for="search-by">
                        <i class="fas fa-search"></i>
                    </label>
                    <input data-search-input="" id="search-by" type="search" placeholder="Search..." />
                    <span data-search-clear="">
                        <i class="fas fa-times"></i>
                    </span>
                </div>
            </div>

            <!-- END SEARCH BOX: this adds support for the search box -->
            <ul class="navbar-nav">
                <li class="nav-header">Links</li>
                <li class="nav-item" id="fsdocs-license-link"><a class="nav-link" href="https://github.com/fsprojects/FSharp.Data/blob/master/LICENSE.md">License</a></li>
                <li class="nav-item" id="fsdocs-release-notes-link"><a class="nav-link" href="https://github.com/fsprojects/FSharp.Data/blob/master/RELEASE_NOTES.md">Release Notes</a></li>
                <li class="nav-item" id="fsdocs-repository-link"><a class="nav-link" href="https://github.com/fsprojects/FSharp.Data/">Source Repository</a></li>
                <li class="nav-header">
  Type Providers
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/library/CsvProvider.html">
    CSV Type Provider

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/library/HtmlProvider.html">
    HTML Type Provider

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/library/JsonProvider.html">
    JSON Type Provider

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/library/XmlProvider.html">
    XML Type Provider

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/library/WorldBank.html">
    WorldBank Provider

  </a>
</li>             
<li class="nav-header">
  Utilities
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/library/CsvFile.html">
    CSV Parser

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/library/HtmlCssSelectors.html">
    HTML CSS selectors

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/library/HtmlParser.html">
    HTML Parser

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/library/Http.html">
    HTTP Utilities

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/library/JsonValue.html">
    JSON Parser

  </a>
</li>             
<li class="nav-header">
  Tutorials
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/tutorials/JsonAnonymizer.html">
    Anonymizing JSON

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/tutorials/JsonToXml.html">
    Converting between JSON and XML

  </a>
</li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsprojects.github.io/FSharp.Data/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="masthead">
            <h3 class="muted"><a href="https://fsprojects.github.io/FSharp.Data/">FSharp.Data</a></h3>
        </div>
        <hr />
        <div class="container" id="fsdocs-content">
            <h1><a name="JSON-パーサーおよびリーダー" class="anchor" href="#JSON-パーサーおよびリーダー">JSON パーサーおよびリーダー</a></h1>
<p>F#の <a href="JsonProvider.html">JSON 型プロバイダー</a> はF#で作成された
効率の良いJSONパーサーを元にしています。</p>
<p>厳密に定義されたJSONドキュメントを処理する場合、
<a href="JsonProvider.html">型プロバイダー</a> を使うと簡単なのですが、
動的に処理するようなシナリオであったり、
単純なスクリプトを手軽に用意したいような場合には
パーサーを使ったほうが簡単でしょう。</p>
<h2><a name="JSONドキュメントの読み取り" class="anchor" href="#JSONドキュメントの読み取り">JSONドキュメントの読み取り</a></h2>
<p>サンプルとなるJSONドキュメントを読み取るには
(F# Interactiveの場合)<code>FSharp.Data.dll</code> ライブラリへの参照を追加するか、
プロジェクトで参照を追加します。</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">Data</span>
</code></pre>
<p><code>FSharp.Data</code> 名前空間にある <code>JsonValue</code> 型を使うと、
以下のようにしてJSON形式の文字列をパースできます：</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="id">info</span> <span class="o">=</span>
  <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="m">JsonValue</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="id">Parse</span><span class="pn">(</span><span class="s">&quot;&quot;&quot; </span>
<span class="s">    { &quot;name&quot;: &quot;Tomas&quot;, &quot;born&quot;: 1985,</span>
<span class="s">      &quot;siblings&quot;: [ &quot;Jan&quot;, &quot;Alexander&quot; ] } &quot;&quot;&quot;</span><span class="pn">)</span>
</code></pre>
<p><code>JsonValue</code> 型は <code>Record</code> や <code>Collection</code> などのケースを持った判別共用体なので
パターンマッチを使ってパース後の値の構造を調査することができます。</p>
<h2><a name="JSON用拡張機能を使用する" class="anchor" href="#JSON用拡張機能を使用する">JSON用拡張機能を使用する</a></h2>
<p>ここではすべての機能を紹介しません。
その代わり、 <code>FSharp.Data.JsonExtensions</code> 名前空間をオープンすることで
利用できるようになるいくつかの拡張機能について説明します。
この名前空間をオープンすると、以下のような記述ができるようになります：</p>
<ul>
<li><code>value.AsBoolean()</code> は値が <code>true</code> または <code>false</code> の場合にブール値を返します。</li>
<li>
<code>value.AsInteger()</code> は値が数値型で、整数として変換可能であれば整数値を返します。
同様に <code>value.AsInteger64()</code> <code>value.AsDecimal()</code> <code>value.AsFloat()</code>
といったものもあります。
</li>
<li><code>value.AsString()</code> は値を文字列として返します。</li>
<li>
<code>value.AsDateTime()</code> は値を <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> か、
1970/1/1からのミリ秒を含んだJSON形式の <code>\/Date(...)\/</code> でパースして
<code>DateTime</code> を返します。
</li>
<li><code>value.AsGuid()</code> は値を <code>Guid</code> としてパースします。</li>
<li>
<code>value?child</code> は <code>child</code> という名前のレコードメンバーを
取得するための動的演算子です。
あるいは <code>value.GetProperty(child)</code> やインデクサ <code>value.[child]</code>
を使うこともできます。
</li>
<li>
<code>value.TryGetProperty(child)</code> はレコードメンバーを安全に取得できます
(もしメンバーが値無しあるいはレコードではなかった場合、 <code>TryGetProperty</code> は
<code>None</code> を返します)。
</li>
<li>
<code>[ for v in value -&gt; v ]</code> とすると <code>value</code> をコレクションとして扱い、
含まれている要素を走査します。
また、 <code>value.AsArray()</code> とすると、すべての要素を配列として取得できます。
</li>
<li><code>value.Properties()</code> はレコードノードの全プロパティのリストを返します。</li>
<li>
<code>value.InnerText()</code> はすべてのテキストあるいは配列内のテキスト
(たとえば複数行文字列を表すデータ)を連結します
</li>
</ul>
<p>数値または日付データとしてパースする( <code>AsFloat</code> や <code>AsDateTime</code> などの)メソッドには
省略可能な引数としてカルチャを指定出来ます。</p>
<p>以下のコードはサンプルで指定したJSONの値を処理する方法の一例です：</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 6)" onmouseover="showTip(event, 'fs1', 6)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 7)" onmouseover="showTip(event, 'fs2', 7)" class="id">Data</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs6', 8)" onmouseover="showTip(event, 'fs6', 8)" class="m">JsonExtensions</span>

<span class="c">// 名前と誕生日を表示</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 9)" onmouseover="showTip(event, 'fs7', 9)" class="id">n</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 10)" onmouseover="showTip(event, 'fs3', 10)" class="id">info</span><span class="o">?</span><span class="id">name</span>
<span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="fn">printfn</span> <span class="s">&quot;</span><span class="pf">%s</span><span class="s"> (</span><span class="pf">%d</span><span class="s">)&quot;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs3', 12)" onmouseover="showTip(event, 'fs3', 12)" class="id">info</span><span class="o">?</span><span class="id">name</span><span class="pn">.</span><span class="id">AsString</span><span class="pn">(</span><span class="pn">)</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs3', 13)" onmouseover="showTip(event, 'fs3', 13)" class="id">info</span><span class="o">?</span><span class="id">born</span><span class="pn">.</span><span class="id">AsInteger</span><span class="pn">(</span><span class="pn">)</span><span class="pn">)</span>

<span class="c">// 兄弟姉妹全員の名前を表示</span>
<span class="k">for</span> <span onmouseout="hideTip(event, 'fs9', 14)" onmouseover="showTip(event, 'fs9', 14)" class="fn">sib</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs3', 15)" onmouseover="showTip(event, 'fs3', 15)" class="id">info</span><span class="o">?</span><span class="id">siblings</span> <span class="k">do</span>
  <span onmouseout="hideTip(event, 'fs8', 16)" onmouseover="showTip(event, 'fs8', 16)" class="fn">printfn</span> <span class="s">&quot;</span><span class="pf">%s</span><span class="s">&quot;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs9', 17)" onmouseover="showTip(event, 'fs9', 17)" class="fn">sib</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs10', 18)" onmouseover="showTip(event, 'fs10', 18)" class="id">AsString</span><span class="pn">(</span><span class="pn">)</span><span class="pn">)</span>
</code></pre>
<p><code>JsonValue</code> 型は実際には <code>IEnumerable&lt;'T&gt;</code> インターフェイスを
実装しているわけではありません(つまり <code>Seq.xyz</code> 関数に渡す事はできません)。
<code>GetEnumerator</code> だけが定義されているため、シーケンス式内や
<code>for</code> ループで使うことができるというわけです。</p>
<h2><a name="WorldBankからのレスポンスをパースする" class="anchor" href="#WorldBankからのレスポンスをパースする">WorldBankからのレスポンスをパースする</a></h2>
<p>もう少し複雑な例として、WorldBankへのリクエストに対する
レスポンスデータ <a href="../../data/WorldBank.json"><code>data/WorldBank.json</code></a> を
サンプルドキュメントにしてみます。
(より便利な方法としては <a href="WorldBank.html">型プロバイダー</a> を使って
WorldBankにアクセスすることもできます)。
このドキュメントは以下のようになっています：</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip highlighted"><code lang="js">[ { <span class="s">"page"</span>: <span class="n">1</span>, <span class="s">"pages"</span>: <span class="n">1</span>, <span class="s">"total"</span>: <span class="n">53</span> },
  [ { <span class="s">"indicator"</span>: {<span class="s">"value"</span>: <span class="s">"Central government debt, total (% of GDP)"</span>},
      <span class="s">"country"</span>: {<span class="s">"id"</span>:<span class="s">"CZ"</span>,<span class="s">"value"</span>:<span class="s">"Czech Republic"</span>},
      <span class="s">"value"</span>:<span class="k">null</span>,<span class="s">"decimal"</span>:<span class="s">"1"</span>,<span class="s">"date"</span>:<span class="s">"2000"</span>},
    { <span class="s">"indicator"</span>: {<span class="s">"value"</span>: <span class="s">"Central government debt, total (% of GDP)"</span>},
      <span class="s">"country"</span>: {<span class="s">"id"</span>:<span class="s">"CZ"</span>,<span class="s">"value"</span>:<span class="s">"Czech Republic"</span>},
      <span class="s">"value"</span>:<span class="s">"16.6567773464055"</span>,<span class="s">"decimal"</span>:<span class="s">"1"</span>,<span class="s">"date"</span>:<span class="s">"2010"</span>} ] ]
</code></pre></td></tr></table>
<p>このように、全体としては配列になっていて、
1番目の要素にはレコード、2番目の要素にはデータ点のコレクションが
含まれた形式になっています。
このドキュメントは以下のようにして読み取りおよびパースできます：</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 19)" onmouseover="showTip(event, 'fs11', 19)" class="id">value</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 20)" onmouseover="showTip(event, 'fs4', 20)" class="m">JsonValue</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 21)" onmouseover="showTip(event, 'fs12', 21)" class="id">Load</span><span class="pn">(</span><span class="k">__SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s">&quot;../../../data/WorldBank.json&quot;</span><span class="pn">)</span>
</code></pre>
<p>なおWeb上から直接データを読み取ることもできます。
また、読み取りを非同期的に実行するバージョンもあります：
*</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 22)" onmouseover="showTip(event, 'fs13', 22)" class="id">valueAsync</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 23)" onmouseover="showTip(event, 'fs4', 23)" class="m">JsonValue</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 24)" onmouseover="showTip(event, 'fs14', 24)" class="id">AsyncLoad</span><span class="pn">(</span><span class="s">&quot;http://api.worldbank.org/country/cz/indicator/GC.DOD.TOTL.GD.ZS?format=json&quot;</span><span class="pn">)</span>
</code></pre>
<p>最上位の配列を1番目の(概要を含んだ)レコードとデータ点のコレクションに分けるためには
<code>value</code> に対してパターンマッチを使って
<code>Jsonvalue.Array</code> のコンストラクタとマッチするかどうか調べます：</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">match</span> <span onmouseout="hideTip(event, 'fs11', 25)" onmouseover="showTip(event, 'fs11', 25)" class="id">value</span> <span class="k">with</span>
<span class="pn">|</span> <span onmouseout="hideTip(event, 'fs4', 26)" onmouseover="showTip(event, 'fs4', 26)" class="rt">JsonValue</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 27)" onmouseover="showTip(event, 'fs15', 27)" class="id">Array</span> <span class="pn">[|</span> <span onmouseout="hideTip(event, 'fs3', 28)" onmouseover="showTip(event, 'fs3', 28)" class="fn">info</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs16', 29)" onmouseover="showTip(event, 'fs16', 29)" class="fn">data</span> <span class="pn">|]</span> <span class="k">-&gt;</span>
    <span class="c">// 概要を表示</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 30)" onmouseover="showTip(event, 'fs17', 30)" class="fn">page</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs18', 31)" onmouseover="showTip(event, 'fs18', 31)" class="fn">pages</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs19', 32)" onmouseover="showTip(event, 'fs19', 32)" class="fn">total</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 33)" onmouseover="showTip(event, 'fs3', 33)" class="fn">info</span><span class="o">?</span><span class="id">page</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs3', 34)" onmouseover="showTip(event, 'fs3', 34)" class="fn">info</span><span class="o">?</span><span class="id">pages</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs3', 35)" onmouseover="showTip(event, 'fs3', 35)" class="fn">info</span><span class="o">?</span><span onmouseout="hideTip(event, 'fs19', 36)" onmouseover="showTip(event, 'fs19', 36)" class="id">total</span>
    <span onmouseout="hideTip(event, 'fs8', 37)" onmouseover="showTip(event, 'fs8', 37)" class="fn">printfn</span> 
      <span class="s">&quot;</span><span class="pf">%d</span><span class="s"> ページ中の </span><span class="pf">%d</span><span class="s"> ページ目を表示中。 全体のレコード数は </span><span class="pf">%d</span><span class="s">&quot;</span> 
      <span class="pn">(</span><span onmouseout="hideTip(event, 'fs18', 38)" onmouseover="showTip(event, 'fs18', 38)" class="fn">pages</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 39)" onmouseover="showTip(event, 'fs20', 39)" class="id">AsInteger</span><span class="pn">(</span><span class="pn">)</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs17', 40)" onmouseover="showTip(event, 'fs17', 40)" class="fn">page</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 41)" onmouseover="showTip(event, 'fs20', 41)" class="id">AsInteger</span><span class="pn">(</span><span class="pn">)</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs19', 42)" onmouseover="showTip(event, 'fs19', 42)" class="fn">total</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 43)" onmouseover="showTip(event, 'fs20', 43)" class="id">AsInteger</span><span class="pn">(</span><span class="pn">)</span><span class="pn">)</span>
    
    <span class="c">// 非nullのデータ点をそれぞれ表示</span>
    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs21', 44)" onmouseover="showTip(event, 'fs21', 44)" class="fn">record</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs16', 45)" onmouseover="showTip(event, 'fs16', 45)" class="fn">data</span> <span class="k">do</span>
      <span class="k">if</span> <span onmouseout="hideTip(event, 'fs21', 46)" onmouseover="showTip(event, 'fs21', 46)" class="fn">record</span><span class="o">?</span><span onmouseout="hideTip(event, 'fs11', 47)" onmouseover="showTip(event, 'fs11', 47)" class="id">value</span> <span class="o">&lt;&gt;</span> <span onmouseout="hideTip(event, 'fs4', 48)" onmouseover="showTip(event, 'fs4', 48)" class="m">JsonValue</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs22', 49)" onmouseover="showTip(event, 'fs22', 49)" class="id">Null</span> <span class="k">then</span>
        <span onmouseout="hideTip(event, 'fs8', 50)" onmouseover="showTip(event, 'fs8', 50)" class="fn">printfn</span> <span class="s">&quot;</span><span class="pf">%d</span><span class="s">: </span><span class="pf">%f</span><span class="s">&quot;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs21', 51)" onmouseover="showTip(event, 'fs21', 51)" class="fn">record</span><span class="o">?</span><span class="id">date</span><span class="pn">.</span><span class="id">AsInteger</span><span class="pn">(</span><span class="pn">)</span><span class="pn">)</span> 
                         <span class="pn">(</span><span onmouseout="hideTip(event, 'fs21', 52)" onmouseover="showTip(event, 'fs21', 52)" class="fn">record</span><span class="o">?</span><span onmouseout="hideTip(event, 'fs11', 53)" onmouseover="showTip(event, 'fs11', 53)" class="id">value</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs23', 54)" onmouseover="showTip(event, 'fs23', 54)" class="id">AsFloat</span><span class="pn">(</span><span class="pn">)</span><span class="pn">)</span>
<span class="pn">|</span> <span class="id">_</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs8', 55)" onmouseover="showTip(event, 'fs8', 55)" class="fn">printfn</span> <span class="s">&quot;失敗しました&quot;</span>
</code></pre>
<p>データ点の <code>value</code> プロパティは常に使用できるわけではありません。
直前で説明してある通り、この値は <code>null</code> になることがあります。
その場合にはデータ点をスキップします。
プロパティが <code>null</code> かどうか調べる場合は単に <code>JsonValue.Null</code> と
比較するだけです。</p>
<p>また <code>date</code> と <code>value</code> のプロパティは元のファイルでは( <code>1990</code> のような)数値ではなく、
( <code>"1990"</code> のような)文字列形式になっている点に注意してください。
この値を int または float として取得しようとすると、
<code>JsonValue</code> は自動的に文字列を特定の形式になるようにパースします。
一般的にはこのAPIがファイルをパースする場合、
できるだけ寛容に値を受け入れるようになっています。</p>
<h2><a name="関連する記事" class="anchor" href="#関連する記事">関連する記事</a></h2>
<ul>
<li>
<a href="JsonProvider.html">JSON 型プロバイダー</a> -
型安全な方法でJSONデータにアクセスする機能を持った
F# 型プロバイダーについて説明しています。
</li>
<li>
<a href="WorldBank.html">WorldBank プロバイダー</a> -
WorldBank 型プロバイダーを使うとWorldBankから受け取ったデータを
簡単に処理出来るようになります。
</li>
<li><a href="../../reference/fsharp-data-jsonvalue.html">API リファレンス: JsonValue 判別共用体</a></li>
<li><a href="../../reference/fsharp-data-jsonextensions.html">API リファレンス: JsonExtensions モジュール</a></li>
</ul>

            <div class="fsdocs-tip" id="fs1">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="fsdocs-tip" id="fs2">Multiple items<br />namespace FSharp.Data<br /><br />--------------------<br />namespace Microsoft.FSharp.Data</div>
<div class="fsdocs-tip" id="fs3">val info : JsonValue</div>
<div class="fsdocs-tip" id="fs4">type JsonValue =<br />&#160;&#160;| String of string<br />&#160;&#160;| Number of decimal<br />&#160;&#160;| Float of float<br />&#160;&#160;| Record of properties: (string * JsonValue) []<br />&#160;&#160;| Array of elements: JsonValue []<br />&#160;&#160;| Boolean of bool<br />&#160;&#160;| Null<br />&#160;&#160;&#160;&#160;member private PrepareRequest : httpMethod:string option * headers:#seq&lt;string * string&gt; option -&gt; HttpRequestBody * (string * string) list * string<br />&#160;&#160;&#160;&#160;member Request : url:string * ?httpMethod:string * ?headers:seq&lt;string * string&gt; -&gt; HttpResponse<br />&#160;&#160;&#160;&#160;member RequestAsync : url:string * ?httpMethod:string * ?headers:seq&lt;string * string&gt; -&gt; Async&lt;HttpResponse&gt;<br />&#160;&#160;&#160;&#160;member ToString : saveOptions:JsonSaveOptions -&gt; string + 1 overload<br />&#160;&#160;&#160;&#160;member WriteTo : w:TextWriter * saveOptions:JsonSaveOptions -&gt; unit<br />&#160;&#160;&#160;&#160;static member AsyncLoad : uri:string * ?encoding:Encoding -&gt; Async&lt;JsonValue&gt;<br />&#160;&#160;&#160;&#160;static member private JsonStringEncodeTo : w:TextWriter -&gt; value:string -&gt; unit<br />&#160;&#160;&#160;&#160;static member Load : stream:Stream -&gt; JsonValue + 2 overloads<br />&#160;&#160;&#160;&#160;static member Parse : text:string -&gt; JsonValue<br />&#160;&#160;&#160;&#160;static member ParseMultiple : text:string -&gt; seq&lt;JsonValue&gt;<br />&#160;&#160;&#160;&#160;...</div>
<div class="fsdocs-tip" id="fs5">static member JsonValue.Parse : text:string -&gt; JsonValue</div>
<div class="fsdocs-tip" id="fs6">Multiple items<br />module JsonExtensions<br /><br />from FSharp.Data<br /><br />--------------------<br />type JsonExtensions =<br />&#160;&#160;static member AsArray : x:JsonValue -&gt; JsonValue []<br />&#160;&#160;static member AsBoolean : x:JsonValue -&gt; bool<br />&#160;&#160;static member AsDateTime : x:JsonValue * ?cultureInfo:CultureInfo -&gt; DateTime<br />&#160;&#160;static member AsDateTimeOffset : x:JsonValue * ?cultureInfo:CultureInfo -&gt; DateTimeOffset<br />&#160;&#160;static member AsDecimal : x:JsonValue * ?cultureInfo:CultureInfo -&gt; decimal<br />&#160;&#160;static member AsFloat : x:JsonValue * ?cultureInfo:CultureInfo * ?missingValues:string [] -&gt; float<br />&#160;&#160;static member AsGuid : x:JsonValue -&gt; Guid<br />&#160;&#160;static member AsInteger : x:JsonValue * ?cultureInfo:CultureInfo -&gt; int<br />&#160;&#160;static member AsInteger64 : x:JsonValue * ?cultureInfo:CultureInfo -&gt; int64<br />&#160;&#160;static member AsString : x:JsonValue * ?cultureInfo:CultureInfo -&gt; string<br />&#160;&#160;...</div>
<div class="fsdocs-tip" id="fs7">val n : JsonValue</div>
<div class="fsdocs-tip" id="fs8">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs9">val sib : JsonValue</div>
<div class="fsdocs-tip" id="fs10">static member JsonExtensions.AsString : x:JsonValue * ?cultureInfo:System.Globalization.CultureInfo -&gt; string</div>
<div class="fsdocs-tip" id="fs11">val value : JsonValue</div>
<div class="fsdocs-tip" id="fs12">static member JsonValue.Load : reader:System.IO.TextReader -&gt; JsonValue<br />static member JsonValue.Load : stream:System.IO.Stream -&gt; JsonValue<br />static member JsonValue.Load : uri:string * ?encoding:System.Text.Encoding -&gt; JsonValue</div>
<div class="fsdocs-tip" id="fs13">val valueAsync : Async&lt;JsonValue&gt;</div>
<div class="fsdocs-tip" id="fs14">static member JsonValue.AsyncLoad : uri:string * ?encoding:System.Text.Encoding -&gt; Async&lt;JsonValue&gt;</div>
<div class="fsdocs-tip" id="fs15">union case JsonValue.Array: elements: JsonValue [] -&gt; JsonValue</div>
<div class="fsdocs-tip" id="fs16">val data : JsonValue</div>
<div class="fsdocs-tip" id="fs17">val page : JsonValue</div>
<div class="fsdocs-tip" id="fs18">val pages : JsonValue</div>
<div class="fsdocs-tip" id="fs19">val total : JsonValue</div>
<div class="fsdocs-tip" id="fs20">static member JsonExtensions.AsInteger : x:JsonValue * ?cultureInfo:System.Globalization.CultureInfo -&gt; int</div>
<div class="fsdocs-tip" id="fs21">val record : JsonValue</div>
<div class="fsdocs-tip" id="fs22">union case JsonValue.Null: JsonValue</div>
<div class="fsdocs-tip" id="fs23">static member JsonExtensions.AsFloat : x:JsonValue * ?cultureInfo:System.Globalization.CultureInfo * ?missingValues:string [] -&gt; float</div>

        </div>

        <!-- BEGIN SEARCH BOX: this adds support for the search box -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
        <script type="text/javascript">var fsdocs_search_baseurl = 'https://fsprojects.github.io/FSharp.Data/';</script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
        <script type="text/javascript" src="https://fsprojects.github.io/FSharp.Data/content/fsdocs-search.js"></script>
        <!-- END SEARCH BOX: this adds support for the search box -->
    </div>
</body>

</html>

